# Fig configuration file for Hypermasher

django:
  build: .
  command: "gunicorn -c tweetcheck/config/gunicorn_config.py --reload wsgi:application"
  links:
    - db:postgres
  environment:
    TWITTER_API_KEY:
    TWITTER_API_SECRET:
    DJANGO_SETTINGS_MODULE:
  volumes:
    - .:/usr/src/app

db:
  image: postgres:9.3
  volumes_from:
    - data

data:
  image: postgres:9.3
  command: echo 'Data-only container'

nginx:
  build: ../tweetcheck-angular
  volumes:
    - ../tweetcheck-angular:/usr/share/nginx/html
    - ../tweetcheck-angular/nginx.conf:/etc/nginx/nginx.conf
  ports:
    - "8000:80"
  links:
    - django:gunicorn
